(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40e57fe0"],{"25f0":function(t,e,a){"use strict";var r=a("6eeb"),n=a("825a"),s=a("d039"),l=a("ad6d"),o="toString",i=RegExp.prototype,c=i[o],u=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&r(RegExp.prototype,o,(function(){var t=n(this),e=String(t.source),a=t.flags,r=String(void 0===a&&t instanceof RegExp&&!("flags"in i)?l.call(t):a);return"/"+e+"/"+r}),{unsafe:!0})},3211:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("my-breadcrumb",[t._v("内容管理")])],1),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("my-status",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}}),a("my-channel",{ref:"relchannel"}),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.dateRange,callback:function(e){t.$set(t.form,"dateRange",e)},expression:"form.dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:t.Ysearch}},[t._v("查询")])],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"1em"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t._v(" 根据筛选条件查询到"+t._s(t.total_count)+"条数据,当前是第"+t._s(t.curPage)+"页： ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.articles,border:""}},[a("el-table-column",{attrs:{prop:"date",label:"封面",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{src:e.row.cover.images[0]}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])]}}])}),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"280"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("el-tag",[t._v("草稿")]):1===e.row.status?a("el-tag",{attrs:{type:"info"}},[t._v("待审核")]):2===e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("审核通过")]):3===e.row.status?a("el-tag",{attrs:{type:"warning"}},[t._v("审核失败")]):4===e.row.status?a("el-tag",{attrs:{type:"danger"}},[t._v("已删除")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"pubdate",label:"发布时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){return t.hEdit(e.$index,e.row)}}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}})]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"",layout:"prev, pager, next","page-size":10,total:t.total_count},on:{"current-change":t.hPageChange}})],1)],1)},n=[],s=(a("d3b7"),a("25f0"),a("96cf"),a("1da1")),l=a("59e7"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{on:{change:t.hChange},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-radio",{attrs:{label:null}},[t._v("全部")]),a("el-radio",{attrs:{label:0}},[t._v("草稿")]),a("el-radio",{attrs:{label:1}},[t._v("待审核")]),a("el-radio",{attrs:{label:2}},[t._v("审核通过")]),a("el-radio",{attrs:{label:3}},[t._v("审核失败")]),a("el-radio",{attrs:{label:4}},[t._v("已删除")])],1)],1)},i=[],c={name:"status",props:["value"],data:function(){return{status:this.value}},methods:{hChange:function(){this.$emit("input",this.status)}}},u=c,d=a("2877"),f=Object(d["a"])(u,o,i,!1,null,null,null),p=f.exports,h={name:"ArticleList",props:{},components:{MyChannel:l["a"],MyStatus:p},data:function(){return{form:{dateRange:null,status:null},isLoading:!1,articles:[],total_count:1,curPage:1}},created:function(){this.loadArticles()},methods:{getCond:function(){var t=this.form,e=t.dateRange,a=t.status,r={page:this.curPage,status:a};return e&&(r.begin_pubdate=e[0],r.end_pubdate=e[1]),this.$refs.refChannel&&this.$refs.refChannel.channelId?(r.channel_id=this.$refs.refChannel.channelId,console.log("频道下拉中选中的是：",this.$refs.refChannel.channelId)):r.channel_id=null,r},loadArticles:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getCond(),t.isLoading=!0,e.prev=2,e.next=5,t.$http({method:"GET",url:"/mp/v1_0/articles",params:a});case 5:r=e.sent,t.articles=r.data.data.results,t.total_count=r.data.data.total_count,t.isLoading=!1,e.next=18;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0),t.$message.error("获取数据失败"),t.articles=[],t.total_count=0,t.isLoading=!1;case 18:case"end":return e.stop()}}),e,null,[[2,11]])})))()},hPageChange:function(t){this.curPage=t,this.loadArticles()},Ysearch:function(){this.loadArticles()},hEdit:function(t,e){var a=e.id.toString();this.$router.push("/edit/"+a)},doDelete:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("你要删除的数据的id是",t.toString()),a.prev=1,a.next=4,e.$http({method:"DELETE",url:"/mp/v1_0/articles/"+t.toString()});case 4:r=a.sent,console.log(r),e.$message.success("删除成功"),e.loadArticles(),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](1),console.log(a.t0),e.$message.error("删除失败");case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))()},handleDelete:function(t,e){var a=this;console.log(t,e),this.$confirm("你真的要删除吗?").then((function(){a.doDelete(e.id)})).catch((function(){}))}}},g=h,m=(a("69d3"),Object(d["a"])(g,r,n,!1,null,"75cdc482",null));e["default"]=m.exports},"69d3":function(t,e,a){"use strict";a("e959")},ad6d:function(t,e,a){"use strict";var r=a("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},e959:function(t,e,a){}}]);
//# sourceMappingURL=chunk-40e57fe0.ac8aa906.js.map