(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f67a6592"],{"31a2":function(e,t,r){},b0aa:function(e,t,r){"use strict";r("31a2")},e8aa:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"publish-container"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("my-breadcrumb",[e._v("发布文章")])],1),r("el-form",{ref:"form",attrs:{"label-width":"80px",rules:e.rules,model:e.form}},[r("el-form-item",{attrs:{label:"标题:",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"内容:",prop:"content"}},[r("quill-editor",{attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),r("el-form-item",{attrs:{label:"封面"}},[r("el-radio-group",{on:{change:e.hImageTypeChange},model:{value:e.form.coverType,callback:function(t){e.$set(e.form,"coverType",t)},expression:"form.coverType"}},[r("el-radio",{attrs:{label:1,name:"type"}},[e._v("单图")]),r("el-radio",{attrs:{label:3,name:"type"}},[e._v("三图")]),r("el-radio",{attrs:{label:0,name:"type"}},[e._v("无图")]),r("el-radio",{attrs:{label:-1,name:"type"}},[e._v("自动")])],1)],1),e.form.coverType>0?r("el-form-item",{attrs:{label:""}},[r("el-row",e._l(e.form.coverType,(function(t,o){return r("el-col",{key:o,attrs:{span:6}},[e._v(" "+e._s(o)+" "),r("my-cover",{model:{value:e.form.coverImages[o],callback:function(t){e.$set(e.form.coverImages,o,t)},expression:"form.coverImages[idx]"}})],1)})),1)],1):e._e(),r("my-channel",{model:{value:e.form.channelId,callback:function(t){e.$set(e.form,"channelId",t)},expression:"form.channelId"}}),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.hPublish(!1)}}},[e._v("发表")]),r("el-button",{on:{click:function(t){return e.hPublish(!0)}}},[e._v("存入草稿")])],1)],1)],1)},a=[],n=(r("96cf"),r("1da1")),l=(r("a753"),r("8096"),r("14e1"),r("953d")),s={name:"AddArticle",components:{quillEditor:l["quillEditor"]},data:function(){return{editorOption:{placeholder:"",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["image"]]}},form:{title:"今天天不错",content:"适合去爬山，有约的吗？ 不回来了的那种？ 来来来！",coverType:0,coverImages:[],cover:"",channelId:""},rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:5,max:30,message:"长度在5到30之间",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"},{min:20,max:3e4,message:"最少20个字",trigger:"blur"}],channelId:[{required:!0,message:"请选择频道",trigger:"blur"}]}}},methods:{hImageTypeChange:function(){1===this.form.coverType?this.form.coverImages.length=1:3===this.form.coverType?this.form.coverImages.length=3:this.form.coverImages=[]},hPublish:function(e){var t=this;this.$refs.form.validate((function(r){r&&t.doPublish(e)}))},doPublish:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var o,a,n,l,s,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("draft",e),r.prev=1,o=t.form,a=o.title,n=o.content,l=o.channelId,s=o.coverType,i=o.coverImages,r.next=5,t.$http({method:"POST",url:"/mp/v1_0/articles",params:{draft:e},data:{title:a,content:n,channel_id:l,cover:{type:s,images:i}}});case 5:c=r.sent,console.log(c),t.$message.success("发布成功了"),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](1),console.log(r.t0),t.$message.error("发布失败");case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))()}}},i=s,c=(r("b0aa"),r("2877")),m=Object(c["a"])(i,o,a,!1,null,"c320b3e2",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-f67a6592.fa8fe6ec.js.map